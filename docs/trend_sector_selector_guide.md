# 趋势板块选股器使用说明

## 📋 策略概述

本选股器基于**资金流向**和**趋势交易策略**，帮助你从热门板块中筛选出符合趋势交易理念的优质股票。

### 选股策略

#### 1. 板块筛选
- 选择最近3日内**资金流入最大的5个板块**
- 确保板块处于上升趋势（板块指数在MA60上方且向上）

#### 2. 股票筛选
- **总市值要求**：200-500亿（行业细分龙头）
- **流通市值要求**：>80亿（确保流动性）
- **日均成交额要求**：>2亿（活跃度高）
- **基本面要求**：排除ST股票，选择基本面良好的公司

#### 3. 趋势交易策略三步法

| 步骤 | 名称 | 判断标准 | 技术指标 |
|------|------|----------|----------|
| 第一步 | 选赛道 | 找处于上升趋势的板块 | 板块指数在MA60上方，且均线掉头向上 |
| 第二步 | 等加油 | 找回调不破支撑的个股 | 股价回踩MA20成功止跌（±3%容忍度） |
| 第三步 | 对火花 | 寻找动能反转点 | MACD在零轴上方重新形成金叉 |

### 评分机制

- **第一步通过**：+40分（板块趋势向上）
- **第二步通过**：+30分（回踩MA20止跌）
- **第三步通过**：+30分（MACD零轴上金叉）
- **满分**：100分（三步全部通过）
- **最低要求**：至少通过2步才会被选中

## 🚀 使用方法

### 基本用法

```bash
# 激活虚拟环境
source env/bin/activate

# 使用默认配置运行
python trend_sector_selector.py

# 查看帮助信息
python trend_sector_selector.py --help
```

### 高级用法

```bash
# 选择近5日热门板块
python trend_sector_selector.py --days 5

# 选择前10个板块
python trend_sector_selector.py --top-sectors 10

# 每个板块选3只股票
python trend_sector_selector.py --stocks-per-sector 3

# 指定输出文件名
python trend_sector_selector.py --output my_stocks.md

# 组合使用
python trend_sector_selector.py --days 3 --top-sectors 5 --stocks-per-sector 2
```

### 参数说明

| 参数 | 说明 | 默认值 |
|------|------|--------|
| `--days` | 统计天数（板块资金流向） | 3 |
| `--top-sectors` | 选择前N个板块 | 5 |
| `--stocks-per-sector` | 每个板块选几只股票 | 2 |
| `--output` | 输出文件名 | `trend_sector_stocks_YYYYMMDD.md` |

## 📊 输出结果

### 1. 控制台输出

运行过程中会显示：
- 热门板块列表及资金流入情况
- 板块MA60趋势判断结果
- 每个板块筛选出的股票及评分
- 最终选股摘要表格

### 2. Markdown 报告

自动生成详细的选股报告，包含：
- 选股策略说明
- 每只股票的详细信息
- 趋势交易三步法通过情况
- 买入理由和风险提示
- 自选股代码列表（可直接复制到 `.env` 文件）

## 💡 使用建议

### 1. 最佳使用时机
- **盘后分析**：每天收盘后运行，分析当日资金流向
- **周末复盘**：周末运行，规划下周交易计划

### 2. 结果解读
- **评分100分**：三步全部通过，最佳买点
- **评分70分**：两步通过，可以关注
- **评分40分**：仅一步通过，需要等待

### 3. 风险控制
- 严格执行止损：跌破MA20或亏损5-8%止损
- 分批建仓：不要一次性满仓
- 关注板块趋势：板块走弱及时离场

### 4. 调整建议

如果选不出股票，可以尝试：

#### 降低市值要求
编辑 [trend_sector_selector.py](trend_sector_selector.py:91-94)，修改：
```python
MIN_MARKET_CAP = 100   # 改为100亿
MAX_MARKET_CAP = 800   # 改为800亿
MIN_CIRCULATING_CAP = 50  # 改为50亿
MIN_AVG_TURNOVER = 1  # 改为1亿
```

#### 增加板块数量
```bash
python trend_sector_selector.py --top-sectors 10
```

#### 放宽MA20回踩容忍度
编辑 [trend_sector_selector.py](trend_sector_selector.py:51)，修改：
```python
MA20_PULLBACK_TOLERANCE = 0.05  # 改为5%
```

## 🔄 与其他选股工具的对比

### 1. [select_stocks.py](select_stocks.py) - 热门板块成长股选股器
- **侧重点**：成长性（市值50-1000亿）
- **策略**：多头排列 + 乖离率 < 5%
- **适合**：寻找成长股机会

### 2. [stock_selector.py](stock_selector.py) - 全市场选股器
- **侧重点**：全市场扫描
- **策略**：趋势交易基础策略
- **适合**：广撒网式选股

### 3. [trend_sector_selector.py](trend_sector_selector.py) - 趋势板块选股器（本工具）
- **侧重点**：行业细分龙头（市值200-500亿）+ 资金流向
- **策略**：趋势交易三步法
- **适合**：价值成长型投资者，关注资金流向和板块轮动

## 📝 示例输出

```
================================================================================
趋势板块选股器 - 基于资金流向和趋势交易策略
================================================================================
[1/6] 获取近3日资金流入最大的5个板块...
  1. 半导体: 资金净流入50.00亿 (+3.50%)
  2. 人工智能: 资金净流入45.00亿 (+3.20%)
  3. 新能源: 资金净流入40.00亿 (+2.80%)
  4. 医药: 资金净流入35.00亿 (+2.50%)
  5. 军工: 资金净流入30.00亿 (+2.30%)
  ✓ 成功获取 5 个热门板块

[2/6] 检查板块趋势（MA60）...
  ✓ 半导体: MA60趋势向上
  ✓ 人工智能: MA60趋势向上
  ✗ 新能源: MA60趋势待确认
  ✓ 医药: MA60趋势向上
  ✓ 军工: MA60趋势向上

[3/6] 从热门板块中筛选股票...
筛选标准: 市值>1000亿, 趋势交易三步法

  [1/5] 分析板块: 半导体
    ✓ 中芯国际(688981): 100分 - 市值3500亿
    ✓ 韦尔股份(603986): 70分 - 市值1200亿

  [2/5] 分析板块: 人工智能
    ✓ 科大讯飞(002230): 100分 - 市值1800亿
    ✓ 海康威视(002415): 70分 - 市值4500亿

...

[4/6] 全局排序...

[5/6] 筛选完成，共选出 10 只股票

[6/6] 结果已保存到: /home/project/daily_stock_analysis/trend_sector_stocks_20260129.md

================================================================================
选股摘要
================================================================================

排名   代码       名称         评分     板块            市值(亿)
--------------------------------------------------------------------------------
1      688981     中芯国际     100      半导体          3500
2      002230     科大讯飞     100      人工智能        1800
3      603986     韦尔股份     70       半导体          1200
4      002415     海康威视     70       人工智能        4500
...
--------------------------------------------------------------------------------
共 10 只股票
================================================================================
```

## ⚠️ 重要提示

1. **本工具仅供参考**，不构成投资建议
2. **股市有风险**，投资需谨慎
3. **严格止损**，保护本金
4. **分散投资**，不要重仓单只股票
5. **持续学习**，不断优化策略

## 🔗 相关文档

- [项目架构文档](docs/ARCHITECTURE.md)
- [选股策略指南](docs/select-stocks-guide.md)
- [交易策略文档](docs/trading-strategy.md)
- [快速参考手册](docs/QUICK_REFERENCE.md)
